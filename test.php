<?php
$servername = "localhost";
$username = "root";
$password = "root";
$dbname = "kaiseisha";
// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);
// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
} 
$sql = "SELECT * FROM jos_publications_titles";
$result = $conn->query($sql);

echo "<pre>";
if ($result->num_rows > 0) {
    // output data of each row
    while($row = $result->fetch_assoc()) {
    	var_dump(getNewId($row["illustrator_id"],$row["illustrator2_id"]));
    }
} else {
    echo "0 results";
}

echo "</pre>";
$conn->close();



function getSlug($str)
{
	$str = str_replace(' ', '_', $str);
	return strtolower($str);
}

function getCountryId($str){
	if($str){
		$str = trim($str, '|');

		$arrTmp = array();
		$myArray = explode('|', $str);
		foreach ($myArray as $key => $value) {
			$tmp = 'CNT'.$value;
			array_push($arrTmp, $tmp);
		}
		return serialize($arrTmp);
	}else{
		return '';
	}
}

function getNewId($str = null, $str2 = null){
	$arrIdTable= array(
	"1"=>630,
	"2"=>631,
	"3"=>1030,
	"4"=>632,
	"5"=>633,
	"6"=>634,
	"7"=>635,
	"8"=>636,
	"9"=>637,
	"10"=>638,
	"11"=>639,
	"12"=>640,
	"13"=>641,
	"14"=>642,
	"15"=>643,
	"16"=>644,
	"17"=>645,
	"18"=>646,
	"19"=>647,
	"20"=>648,
	"21"=>649,
	"22"=>650,
	"23"=>651,
	"24"=>652,
	"25"=>653,
	"26"=>1031,
	"27"=>654,
	"28"=>655,
	"29"=>656,
	"30"=>657,
	"31"=>658,
	"32"=>659,
	"33"=>660,
	"34"=>1032,
	"35"=>661,
	"36"=>662,
	"37"=>663,
	"38"=>664,
	"39"=>665,
	"40"=>666,
	"41"=>667,
	"42"=>668,
	"43"=>669,
	"44"=>670,
	"45"=>671,
	"46"=>672,
	"47"=>673,
	"48"=>674,
	"49"=>675,
	"50"=>676,
	"51"=>677,
	"52"=>678,
	"53"=>679,
	"54"=>680,
	"55"=>681,
	"56"=>682,
	"57"=>683,
	"58"=>684,
	"59"=>685,
	"60"=>686,
	"61"=>687,
	"62"=>688,
	"63"=>689,
	"64"=>690,
	"65"=>691,
	"66"=>692,
	"67"=>693,
	"68"=>694,
	"69"=>695,
	"70"=>696,
	"71"=>697,
	"72"=>698,
	"73"=>699,
	"74"=>700,
	"75"=>701,
	"76"=>702,
	"77"=>703,
	"78"=>704,
	"79"=>1033,
	"80"=>705,
	"81"=>706,
	"82"=>707,
	"83"=>708,
	"84"=>709,
	"85"=>710,
	"86"=>711,
	"87"=>712,
	"88"=>713,
	"89"=>714,
	"90"=>1034,
	"91"=>715,
	"92"=>1035,
	"93"=>716,
	"94"=>1036,
	"95"=>717,
	"96"=>1037,
	"97"=>718,
	"98"=>719,
	"99"=>720,
	"100"=>721,
	"101"=>1038,
	"102"=>1039,
	"103"=>1040,
	"104"=>722,
	"105"=>723,
	"106"=>724,
	"107"=>725,
	"108"=>726,
	"109"=>727,
	"110"=>728,
	"111"=>729,
	"112"=>730,
	"113"=>1041,
	"114"=>731,
	"115"=>732,
	"117"=>733,
	"118"=>734,
	"119"=>735,
	"120"=>736,
	"121"=>737,
	"122"=>738,
	"123"=>739,
	"126"=>740,
	"127"=>741,
	"128"=>742,
	"129"=>1042,
	"130"=>743,
	"131"=>744,
	"132"=>745,
	"133"=>746,
	"134"=>747,
	"135"=>1043,
	"136"=>748,
	"137"=>749,
	"138"=>750,
	"139"=>751,
	"140"=>752,
	"141"=>753,
	"142"=>754,
	"143"=>755,
	"144"=>756,
	"145"=>757,
	"146"=>758,
	"147"=>759,
	"148"=>760,
	"149"=>761,
	"150"=>762,
	"151"=>763,
	"152"=>764,
	"153"=>765,
	"154"=>766,
	"155"=>767,
	"156"=>768,
	"157"=>769,
	"158"=>770,
	"161"=>771,
	"163"=>772,
	"165"=>773,
	"166"=>774,
	"167"=>775,
	"168"=>1044,
	"169"=>776,
	"170"=>777,
	"171"=>778,
	"172"=>779,
	"173"=>780,
	"174"=>1045,
	"175"=>781,
	"176"=>782,
	"177"=>783,
	"178"=>1046,
	"179"=>784,
	"181"=>785,
	"182"=>786,
	"183"=>787,
	"184"=>788,
	"186"=>789,
	"189"=>1047,
	"190"=>790,
	"192"=>791,
	"195"=>792,
	"196"=>793,
	"197"=>794,
	"199"=>795,
	"201"=>796,
	"202"=>1048,
	"203"=>1049,
	"206"=>797,
	"207"=>798,
	"208"=>799,
	"210"=>800,
	"211"=>801,
	"212"=>802,
	"213"=>803,
	"214"=>804,
	"217"=>805,
	"218"=>806,
	"219"=>807,
	"220"=>808,
	"221"=>809,
	"222"=>810,
	"224"=>811,
	"225"=>812,
	"226"=>813,
	"227"=>814,
	"228"=>815,
	"229"=>1050,
	"232"=>816,
	"234"=>817,
	"235"=>1051,
	"237"=>818,
	"238"=>819,
	"239"=>820,
	"241"=>821,
	"242"=>822,
	"243"=>823,
	"244"=>824,
	"245"=>825,
	"246"=>826,
	"247"=>827,
	"249"=>828,
	"250"=>829,
	"252"=>830,
	"253"=>831,
	"254"=>832,
	"255"=>833,
	"256"=>834,
	"257"=>835,
	"259"=>836,
	"260"=>837,
	"263"=>838,
	"264"=>839,
	"265"=>840,
	"266"=>841,
	"267"=>842,
	"268"=>843,
	"271"=>844,
	"272"=>845,
	"273"=>846,
	"274"=>847,
	"275"=>848,
	"277"=>849,
	"278"=>850,
	"279"=>851,
	"280"=>852,
	"281"=>853,
	"282"=>854,
	"283"=>855,
	"284"=>856,
	"285"=>857,
	"286"=>858,
	"287"=>859,
	"288"=>860,
	"290"=>861,
	"291"=>1052,
	"292"=>862,
	"293"=>863,
	"294"=>864,
	"295"=>865,
	"296"=>866,
	"297"=>867,
	"298"=>868,
	"299"=>869,
	"300"=>870,
	"301"=>871,
	"302"=>872,
	"303"=>873,
	"304"=>874,
	"305"=>875,
	"306"=>876,
	"307"=>877,
	"308"=>878,
	"309"=>879,
	"310"=>880,
	"311"=>1053,
	"312"=>1054,
	"313"=>881,
	"315"=>882,
	"317"=>883,
	"318"=>884,
	"319"=>885,
	"320"=>886,
	"321"=>1055,
	"322"=>1056,
	"324"=>887,
	"325"=>888,
	"326"=>889,
	"327"=>890,
	"328"=>891,
	"329"=>892,
	"330"=>893,
	"332"=>894,
	"333"=>895,
	"334"=>896,
	"336"=>897,
	"337"=>898,
	"338"=>899,
	"340"=>900,
	"341"=>901,
	"342"=>902,
	"343"=>1057,
	"344"=>903,
	"345"=>904,
	"346"=>905,
	"347"=>906,
	"348"=>907,
	"349"=>908,
	"350"=>909,
	"351"=>910,
	"352"=>911,
	"353"=>912,
	"354"=>913,
	"355"=>914,
	"356"=>915,
	"358"=>916,
	"360"=>917,
	"361"=>918,
	"362"=>919,
	"363"=>920,
	"364"=>921,
	"365"=>922,
	"366"=>923,
	"367"=>924,
	"368"=>925,
	"369"=>926,
	"370"=>927,
	"371"=>928,
	"372"=>929,
	"373"=>930,
	"374"=>931,
	"375"=>932,
	"378"=>933,
	"379"=>934,
	"380"=>935,
	"381"=>936,
	"382"=>937,
	"383"=>938,
	"384"=>939,
	"385"=>1058,
	"386"=>940,
	"387"=>941,
	"388"=>942,
	"389"=>943,
	"390"=>944,
	"391"=>945,
	"392"=>946,
	"393"=>947,
	"394"=>948,
	"396"=>949,
	"397"=>950,
	"398"=>951,
	"399"=>952,
	"400"=>953,
	"401"=>954,
	"402"=>955,
	"403"=>956,
	"404"=>957,
	"405"=>958,
	"406"=>959,
	"407"=>960,
	"408"=>961,
	"409"=>962,
	"411"=>963,
	"412"=>964,
	"413"=>965,
	"414"=>966,
	"415"=>967,
	"416"=>968,
	"417"=>969,
	"418"=>970,
	"419"=>971,
	"420"=>972,
	"421"=>973,
	"422"=>974,
	"423"=>975,
	"424"=>976,
	"425"=>977,
	"426"=>978,
	"427"=>979,
	"428"=>980,
	"429"=>981,
	"430"=>982,
	"431"=>983,
	"432"=>984,
	"433"=>985,
	"434"=>986,
	"435"=>987,
	"436"=>988,
	"437"=>989,
	"438"=>990,
	"439"=>991,
	"440"=>992,
	"442"=>993,
	"443"=>994,
	"445"=>995,
	"446"=>996,
	"447"=>997,
	"448"=>998,
	"449"=>999,
	"450"=>1000,
	"451"=>1001,
	"452"=>1002,
	"453"=>1003,
	"454"=>1004,
	"455"=>1005,
	"456"=>1006,
	"457"=>1007,
	"458"=>1008,
	"459"=>1009,
	"460"=>1010,
	"461"=>1011,
	"462"=>1012,
	"463"=>1013,
	"466"=>1014,
	"467"=>1015,
	"469"=>1016,
	"470"=>1017,
	"471"=>1018,
	"472"=>1059,
	"473"=>1019,
	"474"=>1020,
	"475"=>1021,
	"476"=>1022,
	"477"=>1023,
	"478"=>1024,
	"479"=>1025,
	"480"=>1026,
	"481"=>1027,
	"482"=>1028);
	
	if($str2){
		if(array_key_exists($str, $arrIdTable) && array_key_exists($str2, $arrIdTable)){
			$id = strval($arrIdTable[$str]);
			$id2 = strval($arrIdTable[$str2]);
			return serialize(array($id,$id2));
		}else{
			return '';
		}
		
	}else{
		if(array_key_exists($str, $arrIdTable)){
			$id = strval($arrIdTable[$str]);
			return serialize(array($id));
		}else{
			return '';
		}		
	}
}
?>